## 审批结构及功能拆分

+ 顶部结构
+ 数据列表展示结构

## 数据列表展示

+ 封装列表请求函数，并展示列表
+ 列表数据处理与改造
  + 申请时间格式化
  + 审批状态有数字转为状态

## 审批设置页面

+ 初始化流程请求，更改初始数据，对激活状态进行转换
+ 列表渲染，动态数据绑定，激活状态双向绑定
+ 点击开关修改流程可用状态
+ 点击设置，对于不可用状态的提示未激活，可用状态的弹出上传弹框
+ 上传弹框，
  + 自定义上传，显示上传列表，点击确定后上传
  + 上传成功提示上传成功，未成功提示上传失败，请再次上传

## 查看

+ 根据审批流程类型设置对应的路由页面
+ 查看的click传入row数据，读取每一行的审批类型，根据审批类型的不同跳到不同页面，并携带每个流程的id
+ 封装接口请求数据，展示数据

## 自定义上传

+ actions设置为#

+ 关闭自动上传

+ 开启自定义上传

  ```js
   <el-upload
            ref="elUpload"
            class="upload-demo"
            drag
            action="#"
            :on-change="changFile" //用内容改变钩子，捕捉每一次上传的文件，并存储
            :file-list="fileList"  //存储上传的东西
            multiple
            :http-request="uploadFail"
            :auto-upload="false"
          >
              
        //并存储      
      changFile(file, fileList) {
        this.fileList = fileList
      },
  ```

+ 将获得的file存入formData ，仅对格式要求为二进制时

  ```js
      const data = new FormData()
      data.append('file', this.fileList[0].raw) //一条数据一条数据的存
      const res = await uploadFile(formData) //发送请求
  ```

+ 发送请求时，设置请求头,这样浏览器才会转换为二进制

  ```js
  export function uploadFile(data) {
    return request({
      url: `/user/process/deploy`,
      method: 'post',
      data,
      headers: { 'Content-Type': 'multipart/form-data' }
    })
  }
  ```

  