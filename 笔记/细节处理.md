## 面包屑导航组件封装

+ 静态组件

+ 实现基础功能，动态样式添加，当前indeex等于自身的index时则显示

+ 定义crumbsList 存储所有导航

+ v-for列表渲染，

  + 监控$route，每打开一个页面，if数组中不存在，就向数组末尾添加，已经存在则不添加，只更改当前索引

  + 添加过后修改当前索引为length-1

    ```js
     $route(newValue) {
          console.log(newValue)
          // 提取信息
          const nav = {
            title: newValue.meta.title,
            name: newValue.name,
            query: newValue.query,
            params: newValue.params
          }
          // 去重
          const flag = this.crumbsList.some(item => item.title === nav.title)
          // 不存在则添加
          if (!flag) {
            this.crumbsList.push(nav)
            // 修改当前的索引
            this.activeIndex = this.crumbsList.length - 1
          }
        }
    ```

+ 点击x,则数组中移出相应item，如果为移出的为当前索引，则修改当前索引为下一个 index-1

  ```js
   handleClose(index) {
        // 移除导航项
        this.crumbsList.splice(index, 1)
        // 如果删除的是当前导航，则修改索引
        if (index === this.activeIndex) {
          // 修改当前索引
          this.activeIndex = index - 1
        }
      }
  ```

+ 路由跳转问题

  + 点击tag，带参跳转路由

    ```js
        // 点击事件路由跳转
        skipRoute(item, index) {
          // 代参数路由跳转
          this.$router.push({
            name: item.name,
            query: item.query,
            params: item.params
          })
          // 修改当前索引
          this.activeIndex = index
        }
    ```

  + 删除当前页面对应的导航项，自动跳转到跳转到下一索引对应路由 

  + 删除的当前索引为0时

    + 当前页面为最后一个页面时，自动跳转首页
    + 否则跳转0





删除导航思路:

+ 是否为当前导航
+ 为当前导航:
  + 为最后一个导航,且index = 0 length=0
    + 删除后自动跳转首页
  + 为0号导航,且length!=0
    + 跳转上一导航,即依旧是0号
  + 其他
    + 调转index-1导航
+ 不为当前导航
  + 当前索引<删除的index,则不影响,不对当前索引做更改
  + activeIndex>index时,删除过后,当前索引-1



导航添加思路:

+ 监听路由跳转

+ 提取路由信息,包括路径和参数

  ```js
        const nav = {
          title: newValue.meta.title,
          name: newValue.name,
          query: newValue.query,
          params: newValue.params
        }
  ```

+ 使用findIndex,对数组进行重复判定

+ 如果为数组中存在,则只改变当前索引

+ 如果不纯在,则像数组末尾添加,并更改当前索引为length-1



## 全屏处理

+ 下载组件screenfull 

  ```js
  npm i screenfull@5.1.0
  ```

+ 使用：

  ```js
  组件中引入
  import screenfull from 'screenfull' // 全屏插件
  
  使用，调用切换全屏
    // 全屏切换
      toggle() {
        screenfull.toggle()
      }
  ```

## 中英文切换

> 该插件需要重头到位自己调用函数包围需要转换的文字，这里只对侧边栏导航使用了

1、下载

```js
npm i vue-i18n@8.27.0 -D
```

2、配置

+ 新建文件夹i18n  ，en.js     zh.js     index.js

+ en.js文件配置

  ```js
  import enLocale from 'element-ui/lib/locale/lang/en'
  export default {
    "lang": "English",
    // 菜单
    "menu": {
      "media": "media",//媒体
      "data": "data",//数据
      "docking": "docking",//对接
    },
    ...enLocale
  }
  ```

+ **zh.js** 文件配置

  ```js
  import zhLocale from 'element-ui/lib/locale/lang/en'
  export default {
    "lang": "中文",
    // 菜单
    "menu": {
      "media": "媒体",//媒体
      "data": "数据",//数据
      "docking": "对接",//对接
      "operator": "当前操作账号：",//当前操作账号
    },
    ...zhLocale
  }
  ```

+ index.js文件配置

  ```js
  import Vue from 'vue'
  import VueI18n from 'vue-i18n'
  import locale from 'element-ui/lib/locale'
  import zh from './zh'
  import en from './en'
  Vue.use(VueI18n)
  const messages = {
    en: {
      ...en,
    },
    zh: {
      ...zh,
    }
  };
  const i18n = new VueI18n({
    locale: localStorage.lang || 'zh',
    messages,
  });
  locale.i18n((key, value) => i18n.t(key, value))
  export default i18n;
  ```

+ main.js配置

  ```js
  import i18n from '@/i18n/index'
  new Vue({
    router,
    store,
    i18n,
    render: h => h(App)
  }).$mount('#app')
  ```

+ 点击切换

  ```js
  langChange(command) {  //点击事件处理函数,command = en/zh
      this.$i18n.locale = command
      localStorage.setItem("lang", command)
      if(command == 'en') {
          this.language = 'English'
      } else if (command == 'zh') {
          this.language = '中文'
      }
  },
  ```

  

+ 这个需要全局配置，要一开始就写，不能自动转换，得放在$t()函数里面才能用

  ```js
  函数里面转换的内容需要在，en.js与zh.js中配置相应的数据
  例：zh和en中配置了
    "menu": {
      "media": "媒体",//媒体
      "data": "数据",//数据
      "docking": "对接",//对接
      "operator": "当前操作账号：",//当前操作账号
    },
      
   使用时
   <span>$t('menu.data')</span>//配置后才能进行语言转换
  ```

  