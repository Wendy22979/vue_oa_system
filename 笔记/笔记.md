## 身份认证

服务器端渲染的开发模式：服务器发送给客户端HTML页面

### 前后端分离的开发模式

依赖于ajax技术，后端只负责提供API接口，前端使用Ajax调用接口

#### 好处

开发体验好： 专注

用户体验好：页面局部刷新

减轻了服务器端压力：页面再浏览器中生成

#### 缺点：

不利于SEO优化  

### 什么是身份认证

身份认证就是身份验证，鉴权，是指通过一定的手段，完成对用户身份的确认

开发中身份认证：手机验证码登录，二维码登录

### 为什么

确认当前所声称为某种身份的用户，确实是所声称的用户

前后端分离模式使用**JWT认证机制**

### Session认证机制

###### http协议无状态性

客户端的每次http请求都是独立的,服务端不会保留每次http请求的状态

![1](..\资料\1.jpg)



###### 如何突破http无状态性的限制

生活中使用会员卡，web开发种使用cookie

![2](..\资料\2.jpg)

###### 什么是cookie

cookie是存储再用户浏览器中的一段**不超过4kb**的**字符串**

它由名称，值，cookie有效期，安全性，使用范围的可选属性组成

不同域名下的cookie各自独立，每当客户发起请求，会自动把当前域名下所有未过期的cookie一同发送到服务器

特性：

- 自动发送
- 域名独立
- 过期时限
- 4kb限制

###### cookie在身份认证中的作用

![3](..\资料\3.jpg)

###### cookie不具有安全性

不建议通过cookie来发送重要的隐私数据给浏览器，浏览器提供了读写cookie的api

![5](..\资料\5.jpg)

###### 提高身份认证的安全性

![6](..\资料\6.jpg)

###### session认证机制

![7](..\资料\7.jpg)



session认证需要cookie配合，cookie不支持跨域



### JWT

JWT（json web token）目前最流行的认证解决方案

JWT由header(头部),Payload(有效荷载)，Signature(签名 )

Payload 就是真正的用户信息  把用户信息经过加密之后生成的字符串

header和Signature是安全性相关的部分，就是为了保证token的安全性

![9](..\资料\9.jpg)

JWT工作原理

token是由时效性，2个小时就需要重新登录

token就是客户端进行请求的一个身份令牌

![8](..\资料\8.jpg)

目的：减轻了服务器的压力，减少频繁的查询数据库

###### 使用token

客户端 登陆接收到token，把token存储到本地，再次请求通过请求头携带token

###### localStorage

只能存储字符串

localStorage.setItem('名字'，值)  

读取

localStorage.getItem('名字')